<?xml version="1.0" encoding="UTF-8"?>
<extractor>
    <filter header="From" match="@fcmtravel\."/>
    <filter header="From" match="@travellink\."/>

    <variable match="[Bb]ooking reference: ([A-Z0-9]{6})" name="bookingRef" value="${1}"/>
    <class type="FlightReservation" match="Flight:" repeat="true">
        <property name="reservationNumber" value="${bookingRef}"/>
        <class type="Flight" name="reservationFor">
            <variable name="airlineCode" match="[A-Z0-9]{2}" value="${0}"/>
            <property name="flightNumber" match="[0-9]{3,4}" value="${0}"/>
            <class type="Airline" name="airline">
                <property name="iataCode" value="${airlineCode}"/>
                <property name="name" match=", ([A-Za-z0-9 ]*)\n" value="${1}"/>
            </class>
            <variable name="depDate" match="Date: *[A-Z][a-z]{2} (.*)\n" value="${1}"/>
            <property name="departureTime" match="Departure: *([0-9]+:[0-9]+)" value="${depDate} ${1}" type="dateTime" format="d MMM yyyy hh:mm"/>
            <class type="Airport" name="departureAirport">
                <property name="name" match=" *(.*)\(" value="${1}"/>
                <property name="iataCode" match="[A-Z]{3}" value="${0}"/>
            </class>
            <variable name="arrDate" match="Date: *[A-Z][a-z]{2} (.*)\n" value="${1}"/>
            <property name="arrivalTime" match="Arrival: *([0-9]+:[0-9]+)" value="${arrDate} ${1}" type="dateTime" format="d MMM yyyy hh:mm"/>
            <class type="Airport" name="arrivalAirport">
                <property name="name" match=" *(.*)\(" value="${1}"/>
                <property name="iataCode" match="[A-Z]{3}" value="${0}"/>
            </class>
        </class>
  </class>
</extractor>

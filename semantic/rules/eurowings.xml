<?xml version="1.0" encoding="UTF-8"?>
<extractor>
    <filter header="From" match="@booking.eurowings.com"/>

    <variable match="Individual reservation code:\s*\*\* ([A-Z0-9]{6})" name="bookingRef" value="${1}"/>
    <class type="FlightReservation" match="Flight:" repeat="true">
        <property name="reservationNumber" value="${bookingRef}"/>
        <class type="Flight" name="reservationFor">
            <variable name="date" match="[0-9]{2}\.[0-9]{2}\.[0-9]{4}" value="${0}"/>
            <variable name="airlineCode" match="\|\s*([A-Z0-9]{2})" value="${1}"/>
            <property name="flightNumber" match="[0-9]{3,4}" value="${0}"/>
            <class type="Airline" name="airline">
                <property name="iataCode" value="${airlineCode}"/>
                <property name="name" match="operated by (.*)\n" value="${1}"/>
            </class>
            <property name="departureTime" match="Departure:\s*([0-9]{2}:[0-9]{2})" value="${date} ${1}" type="dateTime" format="dd.MM.yyyy hh:mm" locale="en"/>
            <class type="Airport" name="departureAirport">
                <property name="name" match="\s*(.*)\n" value="${1}"/>
            </class>
            <property name="arrivalTime" match="Arrival:\s*([0-9]{2}:[0-9]{2})" value="${date} ${1}" type="dateTime" format="dd.MM.yyyy hh:mm" locale="en"/>
            <class type="Airport" name="arrivalAirport">
                <property name="name" match="\s*(.*)\n" value="${1}"/>
            </class>
        </class>
  </class>
</extractor>
